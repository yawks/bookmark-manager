@tailwind base;
@tailwind components;
@tailwind utilities;

/* CSS Variables compatible with Nextcloud */
@layer base {
  :root {
    /* Use Nextcloud CSS variables when available, otherwise fallback */
    --background: var(--color-main-background, hsl(0, 0%, 100%));
    --foreground: var(--color-main-text, hsl(222.2, 84%, 4.9%));

    --card: var(--color-main-background, hsl(0, 0%, 100%));
    --card-foreground: var(--color-main-text, hsl(222.2, 84%, 4.9%));

    --popover: var(--color-main-background, hsl(0, 0%, 100%));
    --popover-foreground: var(--color-main-text, hsl(222.2, 84%, 4.9%));

    --primary: var(--color-primary, hsl(210, 100%, 39%));
    --primary-foreground: var(--color-primary-text, hsl(210, 40%, 98%));

    --secondary: var(--color-background-hover, hsl(210, 40%, 96.1%));
    --secondary-foreground: var(--color-main-text, hsl(222.2, 47.4%, 11.2%));

    --muted: var(--color-background-dark, hsl(210, 40%, 96.1%));
    --muted-foreground: var(--color-text-lighter, hsl(215.4, 16.3%, 46.9%));

    --accent: var(--color-background-hover, hsl(210, 40%, 96.1%));
    --accent-foreground: var(--color-main-text, hsl(222.2, 47.4%, 11.2%));

    --destructive: var(--color-error, hsl(0, 84.2%, 60.2%));
    --destructive-foreground: hsl(210, 40%, 98%);

    --border: var(--color-border, hsl(214.3, 31.8%, 91.4%));
    --input: var(--color-border, hsl(214.3, 31.8%, 91.4%));
    --ring: var(--color-primary, hsl(210, 100%, 39%));

    --radius: var(--border-radius, 0.375rem);
  }

  /* Dark mode with Nextcloud variables */
  .dark, [data-theme="dark"] {
    --background: var(--color-main-background, hsl(222.2, 84%, 4.9%));
    --foreground: var(--color-main-text, hsl(210, 40%, 98%));

    --card: var(--color-main-background, hsl(222.2, 84%, 4.9%));
    --card-foreground: var(--color-main-text, hsl(210, 40%, 98%));

    --popover: var(--color-main-background, hsl(222.2, 84%, 4.9%));
    --popover-foreground: var(--color-main-text, hsl(210, 40%, 98%));

    --primary: var(--color-primary, hsl(210, 40%, 98%));
    --primary-foreground: var(--color-primary-text, hsl(222.2, 47.4%, 11.2%));

    --secondary: var(--color-background-hover, hsl(217.2, 32.6%, 17.5%));
    --secondary-foreground: var(--color-main-text, hsl(210, 40%, 98%));

    --muted: var(--color-background-dark, hsl(217.2, 32.6%, 17.5%));
    --muted-foreground: var(--color-text-lighter, hsl(215, 20.2%, 65.1%));

    --accent: var(--color-background-hover, hsl(217.2, 32.6%, 17.5%));
    --accent-foreground: var(--color-main-text, hsl(210, 40%, 98%));

    --destructive: var(--color-error, hsl(0, 62.8%, 30.6%));
    --destructive-foreground: hsl(210, 40%, 98%);

    --border: var(--color-border, hsl(217.2, 32.6%, 17.5%));
    --input: var(--color-border, hsl(217.2, 32.6%, 17.5%));
    --ring: var(--color-primary, hsl(212.7, 26.8%, 83.9%));
  }
}

/* Base styles for Nextcloud application */
@layer base {
  * {
    @apply border-border;
  }
  
  /* Main application container */
  #app-bookmarksmanager {
    width: 100%;
    min-height: 100vh;
    font-family: var(--font-face, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif);
    background: var(--background);
    color: var(--foreground);
  }

  /* Reset to avoid conflicts with Nextcloud */
  #app-bookmarksmanager * {
    box-sizing: border-box;
  }
}

/* Specific styles for Nextcloud integration */
@layer components {
  .nc-button {
    @apply inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background;
    background-color: var(--primary);
    color: var(--primary-foreground);
    padding: 8px 16px;
  }
  
  .nc-button:hover {
    background-color: var(--color-primary-hover, var(--primary));
    opacity: 0.9;
  }

  .nc-card {
    @apply rounded-lg border bg-card text-card-foreground shadow-sm;
    background: var(--card);
    color: var(--card-foreground);
    border-color: var(--border);
  }

  .nc-input {
    @apply flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50;
    background: var(--background);
    color: var(--foreground);
    border-color: var(--border);
  }
}